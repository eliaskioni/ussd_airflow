initial_screen: customer_status

customer_status:
  type: http_screen
  http_request:
    method: get
    url:  "http://52.212.182.194:8080/customers/{{phone_number}}/status"
  session_key: customer_status
  next_screen: welcome_screen

welcome_screen:
  type: menu_screen
  text: ""
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
      - text:
          en: |
            Free Insurance
          fr: |
            L’assurance gratuite
          default: fr
        next_screen: FreeInsurance
      - text:
           en: |
             Purchase Insurance
           fr: |
             Acheter l’assurance
           default: fr
        next_screen: PurchaseInsurance
      - text:
            en: |
              Check Status
            fr: |
              Mon status
            default: fr
        next_screen: CheckStatus
      - text:
            en: |
              Client Services
            fr: |
              Services client
            default: fr
        next_screen: ClientServices


FreeInsurance:
  type: router_screen
  default_next_screen: CollectNewCustomerName
  router_options:
    - expression: "{{customer_status.registered and customer_status.policies}}"
      next_screen: FreeInsuranceRegisteredUsers
    - expression: "{{ customer_status.registered == False}}"
      next_screen: CollectNewCustomerName

FreeInsuranceRegisteredUsers:
  type: router_screen
  router_options:
      - expression: "{{'orange_loyalty' in customer_status.policies}}"
        next_screen: LoyaltyPolicyDetails
      - expression: "{{'orange_loyalty' not in customer_status.policies}}"
        next_screen: HowToQualifyForFreeInsurance


PurchaseInsurance:
  type: router_screen
  default_next_screen: CollectNewCustomerName
  router_options:
    - expression: "{{customer_status.registered and customer_status.policies|length >= 1}}"
      next_screen: PurchaseInsuranceRegisteredUser
    - expression: "{{ customer_status.registered == False}}"
      next_screen: CollectNewCustomerName

PurchaseInsuranceRegisteredUser:
  type: router_screen
  with_items: "{{customer_status.policies}}"
  router_options:
    - expression: "{{value[0].status == 'Suspended'}}"
      next_screen: SuspendedPolicyDetails
    - expression: "{{key == 'orange_family'}}"
      next_screen: ActiveUpsellPolicy
    - expression: "{{key == 'orange_individual'}}"
      next_screen: ActiveUpsellPolicy
    - expression: "{{key == 'orange_loyalty' and customer_status.policies|length == 1}}"
      next_screen: DetailsOnHowPurchaseInsurance

ActiveUpsellPolicy:
  type: menu_screen
  text:
    en: |
      You have already purchased Hospital Cash insurance and your policy is active.
    fr: |
      Vous avez déjà acheté l'assurance  cash Hôpital et votre police est active.
    default: fr
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
      - text:
          en: |
            For full details, press 1.
          fr: |
             Pour plus d'informations  statut complet, appuyez sur 1.
          default: fr
        next_screen: CheckStatus

ActivePolicyDetailsWithUpsell:
  type: quit_screen
  text:
    en: |
      You have free Orange Money Insurance until end CM. You have purchased supplementary Orange Insurance and your policy is active until ED.

      Person covered: NAME (or FAMILY)
    fr: |
       Vous bénéficiez de l’assurance gratuite d’Orange Money de jusqu'à la fin CM. Vous avez acheté l'assurance supplémentaire
       et votre police est active jusqu'à ce que DATE

       Personne couverte: NAME

    default: fr

ActivePolicyDetailsWithoutUpsell:
  type: menu_screen
  next_screen: MockerOrangeMoneyPaymentModule
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
       You have free Orange Money Insurance until end CM. Person covered:  NAME
       You have not bought additional  hospital cash insurance.

       Buy hospital insurance?
    fr: |
       Vous bénéficiez de l’assurance gratuite Orange Money jusqu'à la fin CM. Personne couverte: NAME (ou FAMILLE). Vous n'avez pas acheté une assurance supplémentaire.

       Acheter de l'assurance hôpital cash ?
    default: fr
  options:
    - text:
       en: |
         Yes
       fr: |
         Oui
       default: fr
      next_screen: PurchaseInsurance
    - text:
       en: |
         No
       fr: |
         Non
       default: fr
      next_screen: DropPurchaseOfMoreInsurance

DropPurchaseOfMoreInsurance:
  type: quit_screen
  text:
    en: |
      You have chosen not to buy more insurance.
    fr: |
      Vous avez choisi de ne pas acheter plus d'assurance
    default: fr


ActivePolicyWithoutLoyaltyCoverage:
  type: quit_screen
  text:
    en: |
        You have purchased AA per night hospital cash insurance and your policy is active until ED.
        Person covered: NAME (or FAMILY)
        You have not qualified for free insurance cover this month
    fr: |
        Vous avez acheté l'assurance supplémentaire Orange Money et votre police est active jusqu'à ce que ED.
        Personne couverte: NAME

        Vous n'êtes pas qualifié pour la couverture gratuite ce mois-ci.

    default: fr

# # We are using mock values at the moment
# Following are the mock values
# 200 -> Already registered with active loyalty and upsell coverage
# 201 -> Already registered with active loyalty but no upsell coverage
# 202 -> Already registered with active upsell but no loyalty coverage
# 203 -> Upsell policy suspended
# 204 -> Already registered, but not active coverage
# 400 -> Not yet registered
CheckStatus:
  type: router_screen
  default_next_screen: CollectNewCustomerName
  router_options:
    - expression: "{{customer_status.registered and ('orange_loyalty' in customer_status.policies.keys() and ('orange_individual' in customer_status.policies.keys() or 'orange_family' in customer_status.policies.keys()) if 'policies' in customer_status else False)}}"
      next_screen: ActivePolicyDetailsWithUpsell
    - expression: "{{customer_status.registered and ('orange_loyalty' in customer_status.policies.keys() and not ('orange_individual' in customer_status.policies.keys() or 'orange_family' in customer_status.policies.keys()) if 'policies' in customer_status else False)}}"
      next_screen: ActivePolicyDetailsWithoutUpsell
    - expression: "{{customer_status.registered and ('orange_loyalty' not in customer_status.policies.keys() and ('orange_individual' in customer_status.policies.keys() or 'orange_family' in customer_status.policies.keys()) if 'policies' in customer_status else False)}}"
      next_screen: ActivePolicyWithoutLoyaltyCoverage
    - expression: "{{ phone_number == 203|string }}"
      next_screen: UpsellPolicySuspended
    - expression: "{{customer_status.registered and not 'policies' in customer_status}}"
      next_screen: PolicyRegisteredWithoutActiveCoverage
    - expression: "{{ customer_status.registered == False}}"
      next_screen: CollectNewCustomerName


UpsellPolicySuspended:
  type: menu_screen
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
        You have purchased AA per night hospital cash insurance and your policy is suspended because premiums were not paid until ED.
        Person covered: NAME (or FAMILY)
        You have not qualified for free insurance cover this month
    fr: |
        Vous avez acheté l'assurance supplémentaire Orange Money et votre police est suspendu parce que les primes ne peuvent pas être collectées jusqu'à ce que ED.
        Personne couverte: NAME

        Vous n'êtes pas qualifié pour la couverture gratuite ce mois-ci.

    default: fr
  options:
    - text:
        en:
          Please pay now.
        fr: |
          Payer maintenant.
        default: fr
      next_screen: MakePayment

PolicyRegisteredWithoutActiveCoverage:
  type: menu_screen
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
        You do not have an active insurance policy. Perform at least ZZ Orange Money transactions this month to qualify for XX per night
        hospital cash cover next month.
    fr: |
        Vous ne disposez pas d'une police d'assurance active.
        Vous n'êtes pas qualifié pour la couverture gratuite ce mois-ci.
    default: fr
  options:
    - text:
        en: |
          To purchase hospital insurance, press 1
        fr: |
          Pour acheter l'assurance-supplémentaire, appuyez sur 1
        default: fr
      next_screen: PurchaseInsurance

DetailsOnHowPurchaseInsurance:
  type: menu_screen
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
        Orange Money Hospital Cash pays AA per night in hospital if you have to spend 3 or more nights in a row.
    fr: |
      L'assurance Orange Money paie 10000F par nuit à l'hôpital si vous avez à passer 3 nuits ou plus d'affilée. 35000F si vous décédez
    default: fr
  options:
    - text:
        en: |
          Read policy details
        fr: |
          Lisez les détails de la police
        default: fr
      next_screen: TermsAndConditions
    - text:
        en: |
           Buy for yourself
        fr: |
          Acheter pour vous-même
        default: fr
      next_screen: BuyPersonalInsurancePolicy
    - text:
        en: |
          Buy for your family
        fr: |
          Acheter pour votre famille
        default: fr
      next_screen: BuyFamilyInsurancePolicy

BuyPersonalInsurancePolicy:
  type: menu_screen
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Coverage is for you only. Must be 18-60 years old.
    fr: |
      La couverture individuelle est uniquement pour vous. Vous devez être âgé 18-60 ans.
    default: fr
  options:
    - text:
        en: |
          Pay MP for 1 month
        fr: |
          Payer MP pour 1 mois
        default: fr
      next_screen: ConfirmPolicyPurchase
    - text:
        en: |
          Pay SM for 6 months.
        fr: |
          Payer SM pour 6 mois
        default: fr
      next_screen: ConfirmPolicyPurchase

BuyFamilyInsurancePolicy:
  type: menu_screen
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Covers you, 1 spouse and children under 18. You and spouse must be 18-60 years old.
    fr: |
      Le plan Familiale couvre vous, le conjoint et les enfants de moins de 18 ans. Vous et votre conjoint devez être âgé 18-60 ans.
    default: fr
  options:
    - text:
        en: |
          Pay MP for 1 month.
        fr: |
          Payer MP pour 1 mois
        default: fr
      next_screen: ConfirmPolicyPurchase
    - text:
        en: |
          Pay SM for 6 months.
        fr: |
          Payer SM pour 6 mois
        default: fr
      next_screen: ConfirmPolicyPurchase

ConfirmPolicyPurchase:
  type: menu_screen
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
       Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Please confirm your purchase to be taken to the Orange Money payment screen.
    fr: |
      Veuillez confirmer votre achat pour accéder à l'écran de paiement Orange Money.
    default: fr
  options:
    - text:
        en: |
          Confirm.
        fr: |
          Confirmer
        default: fr
      next_screen: OrangeMoneyPaymentModule
    - text:
        en: |
          Cancel.
        fr: |
          Annuler
        default: fr
      next_screen: CancelPolicyPurchase

CancelPolicyPurchase:
  type: quit_screen
  text:
    en: |
      Purchase cancelled
    fr: |
      Annulé
    default: fr

OrangeMoneyPaymentModule:
  type: quit_screen
  text:
    en: |
      Orange Money Payment Module
    fr: |
      Merci. Vous recevrez un SMS avec les détails de votre police.
    default: fr

CancelPuchaseOfInsurance:
  type: quit_screen
  text:
    en: |
      Purchase cancelled
    fr: |
      Annulé
    default: fr

SuspendedPolicyDetails:
 type: menu_screen
 error_message:
   en: |
     You have selected invalid option try again.
   fr: |
     Vous avez sélectionné l'option non valide réessayer.
   default: fr
 text:
   en: |
     You have already purchased Orange Money Hospital Cash Insurance, but your policy is suspended because premiums were not paid.
   fr: |
     Vous avez déjà acheté Orange Votre police mais votre police est suspendue parce que les primes ne peuvent pas être collectées.
   default: fr
 options:
   - text:
       en: |
         Pay now.
       fr: |
         Payer votre facture
       default: fr
     next_screen: MakePayment

ClientServices:
  type: menu_screen
  text: ""
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Make a payment
        fr: |
           Payer votre facture
        default: fr
      next_screen: MakePayment
    - text:
        en: |
          Submit a claim
        fr: |
          Soumettre un sinister
        default: fr
      next_screen: SubmitAClaim
    - text:
        en: |
          Terms and Conditions.
        fr: |
           Termes et conditions
        default: fr
      next_screen: TermsAndConditions
    - text:
        en: |
          My details.
        fr: |
          Mes Détails
        default: fr
      next_screen: MyDetails
    - text:
        en: |
          Beneficiary details.
        fr: |
          Détails du bénéficiaire
        default: fr
      next_screen: BeneficiaryDetials
    - text:
        en: |
          Terminate policy.
        fr: |
           Résiliation de police
        default: fr
      next_screen: TerminatePolicy

# # We are using mock values at the moment
# Following are the mock values
# 206 -> if no active upsell coverage
# 207 -> if mobile money
MakePayment:
  type: router_screen
  default_next_screen: NoActiveUpsellCoverage
  router_options:
    - expression: "{{('orange_individual' not in customer_status.policies.keys() and 'orange_family' not in customer_status.policies.keys()) if 'policies' in customer_status else False}}"
      next_screen: NoActiveUpsellCoverage
    - expression: "{{ phone_number == 207|string }}"
      next_screen: ClientServicesMobileMoney

NoActiveUpsellCoverage:
  type: quit_screen
  text:
    en: |
      You do not currently have an active paid insurance policy.
    fr: |
      Vous n'avez pas acheté une assurance supplémentaire Orange Money.

    default: fr

ClientServicesMobileMoney:
  type: menu_screen
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Your next premium is due on or before DATE
    fr: |
      Votre prochaine prime est due avant le DATE
    default: fr
  options:
    - text:
        en: |
          Pay MP for 1 month
        fr: |
          Payer MP pour 1 mois
        default: fr
      next_screen: OrangeMoneyPaymentModule
    - text:
        en: |
          Pay SM for 6 month
        fr: |
          Payer SM pour 6 mois
        default: fr
      next_screen: OrangeMoneyPaymentModule
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

MobileMoney:
  type: menu_screen
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Your next premium is due on or before DATE
    fr: |
      Votre prochaine prime est due avant le DATE
    default: fr
  options:
    - text:
        en: |
          Pay MP for 1 month
        fr: |
          Payer MP pour 1 mois
        default: fr
      next_screen: MobileMoneyConfirmation
    - text:
        en: |
          Pay SM for 6 month
        fr: |
          Payer SM pour 6 mois
        default: fr
      next_screen: MobileMoneyConfirmation
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

MobileMoneyConfirmation:
  type: quit_screen
  text:
    en: |
      Seek for more info from inclusion about this screen (Tibo)
    fr: |
      Pour obtenir plus d'information de l'inclusion de cet écran (Tibo)
    default: fr

SubmitAClaim:
  type: menu_screen
  text: ""
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          To submit a claim contact the call centre by dialling [NUMBER]. Or press 1 and we will call you back.
        fr: |
          Pour soumettre un sinistre contacter le  centre d'appel en composant le [code ] ou appuyez sur 1 et nous vous rappellerons.
        default: fr
      next_screen: QuitSubmitAClaim

QuitSubmitAClaim:
  type: quit_screen
  text:
    en: |
      Thanks. We’ll contact you shortly.
    fr: |
      Merci. Nous vous contacterons bientôt.
    default: fr

TermsAndConditions:
  type: menu_screen
  text: ""
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Free Hospital Cash cover
        fr: |
          Couverture gratuite
        default: fr
      next_screen: FreeHospitalCashCover
    - text:
        en: |
          Additional Hospital Cash Cover
        fr: |
          Couverture supplémentaires
        default: fr
      next_screen: AdditionalHospitalCashCover

FreeHospitalCashCover:
  type: menu_screen
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
        If you do XX Orange Money transactions in the previous month, you will be paid 3,000F cash per night if you have
        to stay in hospital for 3 or more nights in a row, up to 30 nights in a year.
    fr: |
        Si vous effectuez XX transactions Orange Money le mois precedent, vous recevrez 3,000F par nuit si vous restez
        3 nuit d’affile ou plus a l’hopital pour un maximun de 30 nuit dans l’annee
    default: fr

  options:
    - text:
        en: |
          Next
        fr: |
          Continuer
        default: fr
      next_screen: FreeHospitalCashCoverContinuation1
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

FreeHospitalCashCoverContinuation1:
  type: menu_screen
  text:
    en: |
      You also have coverage of 35,000F if you die. Benefits paid to your beneficiary.
    fr: |
      Vous bénéficiez d une couverture de 35 000 en cas mort. L’indémnite  est payé a votre bénéficiaire
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Next
        fr: |
          continuer
        default: fr
      next_screen: FreeHospitalCashCover2
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

FreeHospitalCashCover2:
  type: menu_screen
  text:
    en: |
      Must be 18 years old. Make a claim by calling (call centre) for further instructions.
    fr: |
      Vous devez avoir 18 ans.  Déclarer un sinister en appellant le call center pour plus  information
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

AdditionalHospitalCashCover:
  type: menu_screen
  text:
    en: |
        You will be paid 10,000F cash per night if someone on your policy has to stay in hospital
        for 3 or more nights in a row, up to 30 nights in a year.
    fr: |
        Vous recevrez 10000F  par nuit si vous restez 3 nuit d’affile ou plus a
        l’hopital pour un maximun de 30 nuit dans l’annee
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Next
        fr: |
           Continuer
        default: fr
      next_screen: AdditionalHospitalCashCoverContinuation1
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

AdditionalHospitalCashCoverContinuation1:
  type: menu_screen
  text:
    en: |
      You also have coverage of 100,000F  per person on your policy, if he/she dies.
    fr: |
      Vous bénéficiez d une couverture de 100000F si une vie couverte meurt.
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Next
        fr: |
          Continuer
        default: fr
      next_screen: AdditionalHospitalCashCoverContinuation2
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

AdditionalHospitalCashCoverContinuation2:
  type: menu_screen
  text:
    en: |
      For the first 30 days, you are only covered for events caused by accidents.
    fr: |
      Pour les 30 premiers jours, vous êtes seulement couvert pour des événements causés par des accidents
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Next
        fr: |
          Continuer
        default: fr
      next_screen: AdditionalHospitalCashCoverContinuation3
    - text:
         en: |
           Back
         fr: |
           Retour
         default: fr
      next_screen: welcome_screen

AdditionalHospitalCashCoverContinuation3:
  type: menu_screen
  text:
    en: |
      After 30 days, you are covered  for hospital stays and death for any reason.
    fr: |
      Après 30 jours, vous êtes couvert pour les séjours à l'hôpital et la mort quel que soit la  raison .
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Next
        fr: |
          Continuer
        default: fr
      next_screen: AdditionalHospitalCashCoverContinuation4
    - text:
        en: |
          Back
        fr: |
          Retour
        default: fr
      next_screen: welcome_screen

AdditionalHospitalCashCoverContinuation4:
  type: menu_screen
  text:
    en: |
      Must be between 18-60. Make a claim by calling (call centre) for further instructions.
    fr: |
      Vous et votre conjoint devez être âgé 18-60 ans. Les enfants de moins de 18 ans.. Déclarer un sinister en appellant le call center pour plus  information
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
         en: |
           Back
         fr: |
           Retour
         default: fr
      next_screen: welcome_screen


MyDetails:
 type: menu_screen
 text:
   en: |
       Your NAME: XXXX
       Your DOB: DDMMYYYY
       Spouse: NAME or n/a
       Spouse DOB: DDMMYYYY or n/a
   fr: |
       Votre nom: XXXX
       Votre DN: JJMMAAAA
       Mon conjoint : NAME or n/a
       Conjoint DN: JJMMAAAA or n/a

   default: fr
 error_message:
   en: |
     You have selected invalid option try again.
   fr: |
     Vous avez sélectionné l'option non valide réessayer.
   default: fr
 options:
   - text:
       en: |
         Add / Change details
       fr: |
         Ajouter / modifier les détails
       default: fr
     next_screen: AddOrEditDetails

AddOrEditDetails:
  type: menu_screen
  text:
    en: |
      Add / Edit
    fr: |
      Ajouter / modifier …
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          My Name
        fr: |
          Mon nom
        default: fr
      next_screen: InputFullName
    - text:
        en: |
          My DOB
        fr: |
          Ma date de naissance
        default: fr
      next_screen: InputDOB
    - text:
         en: |
           Spouse Name
         fr: |
           Nom du conjoint
         default: fr
      next_screen: InputSpouseName
    - text:
        en: |
          Spouse DOB
        fr: |
          La date de naissance du conjoint
        default: fr
      next_screen: InputSpouseDOB

InputFullName:
  type: input_screen
  text:
    en: |
      Input full name
    fr: |
      Tapez le nom et prénoms
    default: fr
  next_screen: ChangeSuccessful
  input_identifier: full_name
  validators:
    - regex: "[A-Za-z0-9]"
      text:
        en: |
          Input full name.
        fr: |
          Tapez le nom et prénoms
        default: fr

InputDOB:
  type: input_screen
  text:
    en: |
      Input DOB in format DDMMYYYY
    fr: |
      Entrez la date de naissance dans le format JJMMAAAA
    default: fr
  next_screen: ChangeSuccessful
  input_identifier: DOB
  validators:
    - regex: "[0-9]"
      text:
        en: |
          Input DOB in format DDMMYYYY
        fr: |
          Entrez la date de naissance dans le format JJMMAAAA
        default: fr

InputSpouseName:
  type: input_screen
  text:
    en: |
     Input full name
    fr: |
     Tapez le nom et prénoms
    default: fr
  next_screen: ChangeSuccessful
  input_identifier: spouse_name
  validators:
    - regex: "[A-Za-z0-9]"
      text:
        en: |
          Input full name
        fr: |
          Tapez le nom et prénoms
        default: fr

InputSpouseDOB:
  type: input_screen
  text:
    en: |
      Input DOB in format DDMMYYYY
    fr: |
      Entrez la date de naissance dans le format JJMMAAAA
    default: fr
  next_screen: ChangeSuccessful
  input_identifier: spouse_dob
  validators:
    - regex: "[0-9]"
      text:
        en: |
          Input DOB in format DDMMYYYY
        fr: |
          Entrez la date de naissance dans le format JJMMAAAA
        default: fr

ChangeSuccessful:
  type: menu_screen
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Change was successful. Thank you.
    fr: |
      Le changement a été effectué. Je vous remercie.
    default: fr
  options:
     - text:
        en: |
          Make Further Changes
        fr: |
          Les autres modifications
        default: fr
       next_screen: MyDetails

BeneficiaryDetials:
  type: menu_screen
  text:
    en: |
        Beneficiary NAME: XXXX
        Beneficiary Phone: XXXXXXXXXX
    fr: |
        Bénéficiaire : XXXX
        Téléphone du bénéficiaire : XXXXXXXXXX

    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Add / Change details
        fr: |
          Ajouter / modifier les détails
        default: fr
      next_screen: AddOrEditBeneficiaryDetails

AddOrEditBeneficiaryDetails:
  type: menu_screen
  text:
    en: |
      Add / Edit
    fr: |
       Ajouter / modifier…
    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Beneficiary name
        fr: |
          Nom du bénéficiaire
        default: fr
      next_screen: EditOrAddBeneficiaryName
    - text:
        en: |
          Beneficiary Phone
        fr: |
          Téléphone du
        default: fr
      next_screen: EditOrAddBeneficiaryPhone

EditOrAddBeneficiaryName:
 type: input_screen
 text:
   en: |
     Input full name
   fr: |
     Nom du bénéficiaire
   default: fr
 next_screen: BeneficiaryChangeSuccessful
 input_identifier: beneficiary_name
 validators:
   - regex: "[A-Za-z0-9]"
     text:
       en: |
         Input full name
       fr: |
         Nom du bénéficiaire
       default: fr
BeneficiaryChangeSuccessful:
  type: menu_screen
  error_message:
    en: |
       You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Change was successful. Thank you
    fr: |
      Le changement a été effectué. Je vous remercie.
    default: fr
  options:
    - text:
        en: |
         Make Further Changes
        fr: |
          Les autres modifications
        default: fr
      next_screen: BeneficiaryDetials

EditOrAddBeneficiaryPhone:
  type: input_screen
  text:
    en: |
      Input phone number
    fr: |
      Tapez le nom et prénoms
    default: fr
  next_screen: BeneficiaryChangeSuccessful
  input_identifier: beneficiary_phoneNumber
  validators:
    - regex: "[0-9]"
      text:
        en: |
          Input phone number
        fr: |
          Téléphone du bénéficiaire
        default: fr

InputBeneficiaryPhoneNumber:
  type: input_screen
  text:
    en: |
      Input phone number
    fr: |
      Tapez le nom et prénoms
    default: fr
  next_screen: BeneficiaryChangeSuccessful
  input_identifier: input_beneficiary_phoneNumber
  validators:
    - regex: "[0-9]"
      text:
        en: |
          Input phone number
        fr: |
          Entrez le numéro de téléphone
        default: fr


InputBeneficiaryName:
  type: input_screen
  text:
    en: |
      Input full name
    fr: |
      Tapez le nom et prénoms
    default: fr
  next_screen: BeneficiaryChangeSuccessful
  input_identifier: input_beneficiary_name
  validators:
    - regex: "[0-9]"
      text:
        en: |
          Input phone number
        fr: |
          Tapez le nom et prénoms
        default: fr

# # We are using mock values at the moment
# Following are the mock values
# 208 -> if active upsell coverage
# 209 -> if np active upsell coverage

TerminatePolicy:
  type: router_screen
  default_next_screen: ActivePolicyNotFound
  router_options:
    - expression: "{{('orange_individual' in customer_status.policies.keys() or 'orange_family' in customer_status.policies.keys()) if 'policies' in customer_status else False}}"
      next_screen: ConfirmPolicyTermination
    - expression: "{{('orange_individual' not in customer_status.policies.keys() or 'orange_family' not in customer_status.policies.keys()) if 'policies' in customer_status else False}}"
      next_screen: ActivePolicyNotFound

ConfirmPolicyTermination:
  type: menu_screen
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  text:
    en: |
      Press 1 to confirm that you would like to terminate your Hospital Cash policy.
    fr: |
      Appuyez sur 1 pour confirmer que vous souhaitez mettre fin à votre police hospital cash.
    default: fr
  next_screen: SMSConfirmation
  options:
    - text:
        en: |
          Press 1
        fr: |
          Appuyez sur 1
        default: fr
      next_screen: SMSConfirmation

SMSConfirmation:
  type: quit_screen
  text:
    en: |
      Your Hospital Cash policy has been terminated. To re-activate your policy again, dial #144#XX#
    fr: |
      Votre police hospital cash a été résilié. Pour réactiver à nouveau votre politique, composez le [code USSD].
    default: fr


ActivePolicyNotFound:
  type: quit_screen
  text:
    en: |
      You do not currently have an active paid insurance policy.
    fr: |
      Vous ne possédez pas actuellement une police d'assurance payée active.
    default: fr


LoyaltyPolicyDetails:
  type: menu_screen
  text:
    en: >
      You have free Orange Money Hospital Cash Insurance of XX per night until end CM. If
      you are hospitalised for 3 or more nights in a row. Remain an active Orange Money customer
      this month by performing at least XX transactions to qualify for XX per night cover next month.

      Buy additional hospital Insurance?
    fr: |
      Vous avez l’assurance gratuit Orange Money jusqu'à la fin CM. 3000F/nuit si vous êtes hospitalisé pendant 3 nuits ou plus d'affilée.
      10000F si vous décédez. Faire au moins ZZ transaction ce mois-ci pour se qualifier pour le mois prochain.

      Acheter l'assurance supplémentaire?

    default: fr
  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Yes
        fr: |
          Oui
        default: fr
      next_screen: PurchaseInsurance
    - text:
        en: |
           No
        fr: |
          Non
        default: fr
      next_screen: QuitLoyaltyPolicyDetails

QuitLoyaltyPolicyDetails:
  type: quit_screen
  text:
    en: |
      You have chosen not to buy additional hospital insurance.
    fr: |
      Vous avez choisi de ne pas acheter l'assurance- supplémentaire
    default: fr

HowToQualifyForFreeInsurance:
  type: menu_screen
  text:
    en: |
      You performed less than ZZ Orange Money transactions in PM to qualify for free insurance.
      Perform at least ZZ transactions this month to qualify for XX per night cover next month.

      Buy hospital insurance?
    fr: |
      Vous avez effectué moins de ZZ transactions Orange Money en PM pour se qualifier pour l'assurance gratuite.
      Effectuer  au moin ZZ  transactions  ce mois-ci pour se qualifier pour de couverture le mois prochain ".

      Acheter du cash hospital?

    default: fr

  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer.
    default: fr
  options:
    - text:
        en: |
          Yes
        fr: |
          Oui
        default: fr
      next_screen: PurchaseInsurance
    - text:
        en: |
          No
        fr: |
          Non
        default: fr
      next_screen: QuitHowToQualify

QuitHowToQualify:
  type: quit_screen
  text:
    en: |
      You have chosen not to buy insurance
    fr: |
      Vous avez choisi de ne pas acheter l'assurance supplémentaire
    default: fr

CollectNewCustomerName:
  type: input_screen
  text:
    en: |
      You have not yet registered for Orange Money insurance. Must be 18 years old. To register, please enter your full name.
    fr: |
      Vous n'êtes pas encore inscrit pour l'assurance Orange Money. Vous devez avoir 18 ans. Pour vous inscrire, tapez votre nom et prénoms.
    default: fr
  next_screen: CollectCustomerDOB
  input_identifier: full_name
  validators:
    - regex: "[A-Za-z0-9]"
      text:
        en: |
          You have not yet registred for Orange Money insurance. Must be 18 years old. To register please enter your full name.
        fr: |
          Vous n'êtes pas encore inscrit pour l'assurance Orange Money. Vous devez avoir 18 ans. Pour vous inscrire, tapez votre nom et prénoms.
        default: fr


CollectCustomerDOB:
  type: input_screen
  text:
    en: |
      Enter your date of birth in the format YYYY-MM-DD.
    fr: |
      Entrez votre date de naissance dans le format AAAA-MM-JJ
    default: fr
  next_screen: RegisterNewCustomer
  input_identifier: date_of_birth
  validators:
    - regex: (\d{4})[/.-](\d{2})[/.-](\d{2})$
      text:
        en: |
          Enter your date of birth in the format YYYY-MM-DD.
        fr: |
          Entrez votre date de naissance dans le format AAAA-MM-JJ
        default: fr

RegisterNewCustomer:
  type: http_screen
  next_screen: RegisterNewCustomerRouter
  session_key: new_customer
  http_request:
    method: post
    url: "http://52.212.182.194:8080/customers/register"
    json:
      full_name: "{{full_name}}"
      msisdn: "{{phone_number}}"
      date_of_birth: "{{date_of_birth}}"
    timeout: 30
    headers:
      content-type: "application/json"

RegisterNewCustomerRouter:
  type: router_screen
  default_next_screen: ErrorRegisteringUser
  router_options:
    - expression: "{{ new_customer.status_code == 200 }}"
      next_screen: BeneficiaryInCaseOfDeath
    - expression: "{{ new_customer.status_code == 400 }}"
      next_screen: RegisterInvalidRequest

RegisterInvalidRequest:
  type: menu_screen
  text:
    en: |
      "Go an error when regestering you have entered.
      {{new_customer.errors}}. press one to try again"
    fr: |
      "Faire une erreur lors de la régénération que vous avez saisie.
      {{new_customer.errors}}. Appuyez une fois sur la
      touche pour réessayer"
    default: fr
  options:
    - text: continue
      next_screen: CollectNewCustomerName

ErrorRegisteringUser:
  type: quit_screen
  text:
    en: Go an error while trying to register. Please contact customer care
    fr: |
      Aller une erreur en essayant de s'inscrire.
      Veuillez contacter le service à la clientèle
    default: fr

BeneficiaryInCaseOfDeath:
  type: input_screen
  text:
    en: |
        Congratulations, you have registered for Orange Money insurance.

        Enter the name of a person who can receive your benefit if you pass away
    fr: |
      Félicitations, vous etre enregistré pour l'assurance Orange Money.

      Entrez le nom d'une personne qui recevra votre indemnité si vous décédez.
    default: fr
  next_screen: BeneficiaryPhoneNumber
  input_identifier: beneficiary_name
  validators:
    - regex: "[A-Za-z0-9]"
      text:
        en: |
          Congratulations, you have registered for Orange Money insurance.

          Enter the name of a person who can receive your benefit if you pass away
        fr: |
          Félicitations, vous etre enregistré pour l'assurance Orange Money.

          Entrez le nom d'une personne qui recevra votre indemnité si vous décédez.
        default: fr

BeneficiaryPhoneNumber:
  type: input_screen
  text:
    en: |
      Thanks. Please enter that person’s phone number.
    fr: |
      Merci. S'il vous plaît entrer le numéro de téléphone de cette personne.
    default: fr
  next_screen: CompleteRegistration
  input_identifier: beneficiary_phoneNumber
  validators:
    - regex: "[0-9]"
      text:
        en: |
          Thanks. Please enter that person's phone number.
        fr: |
          Merci. S'il vous plaît entrer le numéro de téléphone de cette personne.
        default: fr

AddBeneficiaryDetails:
  type: http_screen
  next_screen: CompleteRegistration
  session_key: beneficiary_details
  http_request:
    method: post
    url: "http://52.212.182.194:8080/policies/{{policyGuid}}"
    params:
      full_name: "{{full_name}}"
      channel: "USSD"
#      TODO Elias
      status: "Suspended"
      active: true
      beneficiary_name: "{{beneficiary_name}}"
      beneficiary_msisdn: "{{beneficiary_phoneNumber}}"
      spouse_name: null
      spouse_msisdn: null
      spouse_dob: null
      start_date: null
      end_date: "2014-12-12"
      dependent_start_date: "2014-12-12"
      customer_guid: "{{customerGuid}}"
      product_guid: "{{policyGuid}}"
    verify: true
    timeout: 30
    headers:
      content-type: "application/json"


CompleteRegistration:
  type: menu_screen
  text:
    en: |
      Thanks. All details are complete
    fr: |
      Merci. Tous les détails sont renseigner
    default: fr

  error_message:
    en: |
      You have selected invalid option try again.
    fr: |
      Vous avez sélectionné l'option non valide réessayer
    default: fr
  options:
    - text:
         en: |
            Free Insurance
         fr: |
           L’assurance gratuite
         default: fr
      next_screen: FreeInsurance
    - text:
         en: |
           Purchase Insurance
         fr: |
           Acheter  l’assurance
         default: fr
      next_screen: PurchaseInsurance
    - text:
          en: |
             Check Status
          fr: |
            Mon status
          default: fr
      next_screen: CheckStatus

MockerOrangeMoneyPaymentModule:
  type: quit_screen
  text:
    en: |
      Get guidance on this screen from inclusivity solutions ( Tibo)
    fr: |
      Obtenez des conseils sur cet écran à partir de l'inclusion solutions ( Tibo)
    default: fr
